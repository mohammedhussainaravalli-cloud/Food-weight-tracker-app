<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Weight Tracker App</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f4f4;
      margin: 0;
      padding: 0;
    }
    header {
      background: #4CAF50;
      color: white;
      padding: 15px;
      text-align: center;
    }
    .container {
      padding: 20px;
    }
    h2 {
      color: #333;
    }
    form {
      margin-bottom: 20px;
      background: #fff;
      padding: 15px;
      border-radius: 5px;
      box-shadow: 0px 2px 4px rgba(0,0,0,0.1);
    }
    input, select, textarea, button {
      width: 100%;
      padding: 8px;
      margin: 6px 0;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    button {
      background: #4CAF50;
      color: white;
      cursor: pointer;
    }
    button:hover {
      background: #45a049;
    }
    .result {
      margin-top: 10px;
      padding: 10px;
      background: #e7f3e7;
      border: 1px solid #c8e6c9;
      border-radius: 4px;
    }
    .quote-box {
      background: #fff;
      padding: 15px;
      border-radius: 5px;
      box-shadow: 0px 2px 4px rgba(0,0,0,0.1);
      margin-top: 20px;
      font-style: italic;
    }
  </style>
</head>
<body>
  <header>
    <h1>Weight Tracker App</h1>
  </header>

  <div class="container">
    <!-- Meal Logging -->
    <h2>Log Meal</h2>
    <form id="mealForm">
      <input type="date" id="mealDate" required>
      <input type="time" id="mealHour" required>
      <select id="mealType" required>
        <option value="">Select Meal Type</option>
        <option>Breakfast</option>
        <option>Lunch</option>
        <option>Dinner</option>
        <option>Snack</option>
      </select>
      <textarea id="mealDescription" placeholder="Meal Description" required></textarea>
      <input type="number" id="mealCalories" placeholder="Calories" required>
      <input type="text" id="mealFeeling" placeholder="How do you feel?">
      <button type="submit">Log Meal</button>
    </form>
    <div id="mealResult" class="result"></div>

    <!-- Weight Logging -->
    <h2>Log Weight</h2>
    <form id="weightForm">
      <input type="date" id="weightDate" required>
      <input type="number" id="weightValue" placeholder="Weight (KG)" step="0.1" required>
      <button type="submit">Log Weight</button>
    </form>
    <div id="weightResult" class="result"></div>

    <!-- Daily Calories -->
    <h2>Daily Calories</h2>
    <form id="calorieForm">
      <input type="date" id="calorieDate" required>
      <button type="submit">Get Calories</button>
    </form>
    <div id="calorieResult" class="result"></div>

    <!-- Weights History -->
    <h2>Weight History</h2>
    <button id="getWeightsBtn">Load Weights</button>
    <div id="weightsResult" class="result"></div>

    <!-- Quote -->
    <div class="quote-box" id="quoteBox">Loading motivational quote...</div>
  </div>

  <script>
    const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbxGOcuTV4RYUBr8WuQ7GYOwk8nzpRel-lnOr5Yfwu6Xx2pdXlmmwzog11G2cb0nN-41/exec"; // Replace with your Apps Script Web App URL

    // Log Meal
    document.getElementById("mealForm").addEventListener("submit", async (e) => {
      e.preventDefault();
      const data = {
        action: "logMeal",
        date: document.getElementById("mealDate").value,
        hour: document.getElementById("mealHour").value,
        mealType: document.getElementById("mealType").value,
        mealDescription: document.getElementById("mealDescription").value,
        calories: document.getElementById("mealCalories").value,
        feeling: document.getElementById("mealFeeling").value,
      };
      const res = await fetch(SCRIPT_URL, {
        method: "POST",
        body: JSON.stringify(data),
      });
      const result = await res.json();
      document.getElementById("mealResult").innerText = result.message || result.error;
    });

    // Log Weight
    document.getElementById("weightForm").addEventListener("submit", async (e) => {
      e.preventDefault();
      const data = {
        action: "logWeight",
        date: document.getElementById("weightDate").value,
        weight: document.getElementById("weightValue").value,
      };
      const res = await fetch(SCRIPT_URL, {
        method: "POST",
        body: JSON.stringify(data),
      });
      const result = await res.json();
      document.getElementById("weightResult").innerText = result.message || result.error;
    });

    // Get Daily Calories
    document.getElementById("calorieForm").addEventListener("submit", async (e) => {
      e.preventDefault();
      const data = {
        action: "getDailyCalories",
        date: document.getElementById("calorieDate").value,
      };
      const res = await fetch(SCRIPT_URL, {
        method: "POST",
        body: JSON.stringify(data),
      });
      const result = await res.json();
      document.getElementById("calorieResult").innerText = 
        result.calories !== undefined ? `Total Calories: ${result.calories}` : result.error;
    });

    // Get Weights
    document.getElementById("getWeightsBtn").addEventListener("click", async () => {
      const data = { action: "getWeights" };
      const res = await fetch(SCRIPT_URL, {
        method: "POST",
        body: JSON.stringify(data),
      });
      const result = await res.json();
      if (result.weights) {
        document.getElementById("weightsResult").innerText = 
          result.weights.map(w => `${w.date}: ${w.weight} KG`).join("\n");
      } else {
        document.getElementById("weightsResult").innerText = result.error;
      }
    });

    // Get Quote
    async function loadQuote() {
      const data = { action: "getQuote" };
      const res = await fetch(SCRIPT_URL, {
        method: "POST",
        body: JSON.stringify(data),
      });
      const result = await res.json();
      document.getElementById("quoteBox").innerText = result.quote || result.error;
    }
    loadQuote();
  </script>
</body>
</html>
